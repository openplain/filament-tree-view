var yt=Object.create;var we=Object.defineProperty;var ht=Object.getOwnPropertyDescriptor;var bt=Object.getOwnPropertyNames;var It=Object.getPrototypeOf,Dt=Object.prototype.hasOwnProperty;var le=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var xt=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of bt(r))!Dt.call(e,o)&&o!==t&&we(e,o,{get:()=>r[o],enumerable:!(n=ht(r,o))||n.enumerable});return e};var V=(e,r,t)=>(t=e!=null?yt(It(e)):{},xt(r||!e||!e.__esModule?we(t,"default",{value:e,enumerable:!0}):t,e));var ue=le(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.bind=void 0;function wt(e,r){var t=r.type,n=r.listener,o=r.options;return e.addEventListener(t,n,o),function(){e.removeEventListener(t,n,o)}}Z.bind=wt});var Ee=le(L=>{"use strict";var B=L&&L.__assign||function(){return B=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},B.apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});L.bindAll=void 0;var Tt=ue();function Ae(e){if(!(typeof e>"u"))return typeof e=="boolean"?{capture:e}:e}function St(e,r){if(r==null)return e;var t=B(B({},e),{options:B(B({},Ae(r)),Ae(e.options))});return t}function Ot(e,r,t){var n=r.map(function(o){var a=St(o,t);return(0,Tt.bind)(e,a)});return function(){n.forEach(function(a){return a()})}}L.bindAll=Ot});var q=le(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.bindAll=N.bind=void 0;var At=ue();Object.defineProperty(N,"bind",{enumerable:!0,get:function(){return At.bind}});var Et=Ee();Object.defineProperty(N,"bindAll",{enumerable:!0,get:function(){return Et.bindAll}})});function Te(e){if(Array.isArray(e))return e}function Se(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,o,a,s,l=[],i=!0,u=!1;try{if(a=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;i=!1}else for(;!(i=(n=a.call(t)).done)&&(l.push(n.value),l.length!==r);i=!0);}catch(f){u=!0,o=f}finally{try{if(!i&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}function W(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function X(e,r){if(e){if(typeof e=="string")return W(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?W(e,r):void 0}}function Oe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G(e,r){return Te(e)||Se(e,r)||X(e,r)||Oe()}var ct=V(q());var J="data-pdnd-honey-pot";function Q(e){return e instanceof Element&&e.hasAttribute(J)}function _(e){var r=document.elementsFromPoint(e.x,e.y),t=G(r,2),n=t[0],o=t[1];return n?Q(n)?o??null:n:null}function F(e){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},F(e)}function Pe(e,r){if(F(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(F(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ce(e){var r=Pe(e,"string");return F(r)=="symbol"?r:r+""}function E(e,r,t){return(r=Ce(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var U=V(q());var je=2147483647;function Me(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function Fe(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Me(Object(t),!0).forEach(function(n){E(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Me(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var $=2,ke=$/2;function Pt(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function Ct(e){return{x:e.x-ke,y:e.y-ke}}function jt(e){return{x:Math.max(e.x,0),y:Math.max(e.y,0)}}function Mt(e){return{x:Math.min(e.x,window.innerWidth-$),y:Math.min(e.y,window.innerHeight-$)}}function Re(e){var r=e.client,t=Mt(jt(Ct(Pt(r))));return DOMRect.fromRect({x:t.x,y:t.y,width:$,height:$})}function He(e){var r=e.clientRect;return{left:"".concat(r.left,"px"),top:"".concat(r.top,"px"),width:"".concat(r.width,"px"),height:"".concat(r.height,"px")}}function Ft(e){var r=e.client,t=e.clientRect;return r.x>=t.x&&r.x<=t.x+t.width&&r.y>=t.y&&r.y<=t.y+t.height}function kt(e){var r=e.initial,t=document.createElement("div");t.setAttribute(J,"true");var n=Re({client:r});Object.assign(t.style,Fe(Fe({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},He({clientRect:n})),{},{pointerEvents:"auto",zIndex:je})),document.body.appendChild(t);var o=(0,U.bind)(window,{type:"pointermove",listener:function(s){var l={x:s.clientX,y:s.clientY};n=Re({client:l}),Object.assign(t.style,He({clientRect:n}))},options:{capture:!0}});return function(s){var l=s.current;if(o(),Ft({client:l,clientRect:n})){t.remove();return}function i(){u(),t.remove()}var u=(0,U.bindAll)(window,[{type:"pointerdown",listener:i},{type:"pointermove",listener:i},{type:"focusin",listener:i},{type:"focusout",listener:i},{type:"dragstart",listener:i},{type:"dragenter",listener:i},{type:"dragover",listener:i}],{capture:!0})}}function Be(){var e=null;function r(){return e=null,(0,U.bind)(window,{type:"pointermove",listener:function(o){e={x:o.clientX,y:o.clientY}},options:{capture:!0}})}function t(){var n=null;return function(a){var s=a.eventName,l=a.payload;if(s==="onDragStart"){var i=l.location.initial.input,u=e??{x:i.clientX,y:i.clientY};n=kt({initial:u})}if(s==="onDrop"){var f,p=l.location.current.input;(f=n)===null||f===void 0||f({current:{x:p.clientX,y:p.clientY}}),n=null,e=null}}}return{bindEvents:r,getOnPostDispatch:t}}function Le(e){if(Array.isArray(e))return W(e)}function Ne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(e){return Le(e)||Ne(e)||X(e)||Ke()}var Ge=V(q());function S(e){var r=null;return function(){if(!r){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=e.apply(this,o);r={result:s}}return r.result}}var We=S(function(){return navigator.userAgent.includes("Firefox")});var z=S(function(){var r=navigator,t=r.userAgent;return t.includes("AppleWebKit")&&!t.includes("Chrome")});var qe=V(q());var ce={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function $e(e){var r=e.dragLeave;return z()?r.hasOwnProperty(ce.isLeavingWindow):!1}(function(){if(typeof window>"u"||!z())return;function r(){return{enterCount:0,isOverWindow:!1}}var t=r();function n(){t=r()}(0,qe.bindAll)(window,[{type:"dragstart",listener:function(){t.enterCount=0,t.isOverWindow=!0}},{type:"drop",listener:n},{type:"dragend",listener:n},{type:"dragenter",listener:function(a){!t.isOverWindow&&t.enterCount===0&&(a[ce.isEnteringWindow]=!0),t.isOverWindow=!0,t.enterCount++}},{type:"dragleave",listener:function(a){t.enterCount--,t.isOverWindow&&t.enterCount===0&&(a[ce.isLeavingWindow]=!0,t.isOverWindow=!1)}}],{capture:!0})})();function Rt(e){return"nodeName"in e}function Ue(e){return Rt(e)&&e.ownerDocument!==document}function ze(e){var r=e.dragLeave,t=r.type,n=r.relatedTarget;return t!=="dragleave"?!1:z()?$e({dragLeave:r}):n==null?!0:We()?Ue(n):n instanceof HTMLIFrameElement}function Ye(e){var r=e.onDragEnd;return[{type:"pointermove",listener:function(){var t=0;return function(){if(t<20){t++;return}r()}}()},{type:"pointerdown",listener:r}]}function k(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var Ht=function(r){var t=[],n=null,o=function(){for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];t=l,!n&&(n=requestAnimationFrame(function(){n=null,r.apply(void 0,t)}))};return o.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},o},Ve=Ht;var de=Ve(function(e){return e()}),te=function(){var e=null;function r(n){var o=requestAnimationFrame(function(){e=null,n()});e={frameId:o,fn:n}}function t(){e&&(cancelAnimationFrame(e.frameId),e.fn(),e=null)}return{schedule:r,flush:t}}();function Xe(e){var r=e.source,t=e.initial,n=e.dispatchEvent,o={dropTargets:[]};function a(l){n(l),o={dropTargets:l.payload.location.current.dropTargets}}var s={start:function(i){var u=i.nativeSetDragImage,f={current:t,previous:o,initial:t};a({eventName:"onGenerateDragPreview",payload:{source:r,location:f,nativeSetDragImage:u}}),te.schedule(function(){a({eventName:"onDragStart",payload:{source:r,location:f}})})},dragUpdate:function(i){var u=i.current;te.flush(),de.cancel(),a({eventName:"onDropTargetChange",payload:{source:r,location:{initial:t,previous:o,current:u}}})},drag:function(i){var u=i.current;de(function(){te.flush();var f={initial:t,previous:o,current:u};a({eventName:"onDrag",payload:{source:r,location:f}})})},drop:function(i){var u=i.current,f=i.updatedSourcePayload;te.flush(),de.cancel(),a({eventName:"onDrop",payload:{source:f??r,location:{current:u,previous:o,initial:t}}})}};return s}var fe={isActive:!1};function Ze(){return!fe.isActive}function Bt(e){return e.dataTransfer?e.dataTransfer.setDragImage.bind(e.dataTransfer):null}function Lt(e){var r=e.current,t=e.next;if(r.length!==t.length)return!0;for(var n=0;n<r.length;n++)if(r[n].element!==t[n].element)return!0;return!1}function Nt(e){var r=e.event,t=e.dragType,n=e.getDropTargetsOver,o=e.dispatchEvent;if(!Ze())return;var a=Kt({event:r,dragType:t,getDropTargetsOver:n});fe.isActive=!0;var s={current:a};pe({event:r,current:a.dropTargets});var l=Xe({source:t.payload,dispatchEvent:o,initial:a});function i(c){var d=Lt({current:s.current.dropTargets,next:c.dropTargets});s.current=c,d&&l.dragUpdate({current:s.current})}function u(c){var d=k(c),m=Q(c.target)?_({x:d.clientX,y:d.clientY}):c.target,v=n({target:m,input:d,source:t.payload,current:s.current.dropTargets});v.length&&(c.preventDefault(),pe({event:c,current:v})),i({dropTargets:v,input:d})}function f(){s.current.dropTargets.length&&i({dropTargets:[],input:s.current.input}),l.drop({current:s.current,updatedSourcePayload:null}),p()}function p(){fe.isActive=!1,g()}var g=(0,Ge.bindAll)(window,[{type:"dragover",listener:function(d){u(d),l.drag({current:s.current})}},{type:"dragenter",listener:u},{type:"dragleave",listener:function(d){ze({dragLeave:d})&&(i({input:s.current.input,dropTargets:[]}),t.startedFrom==="external"&&f())}},{type:"drop",listener:function(d){if(s.current={dropTargets:s.current.dropTargets,input:k(d)},!s.current.dropTargets.length){f();return}d.preventDefault(),pe({event:d,current:s.current.dropTargets}),l.drop({current:s.current,updatedSourcePayload:t.type==="external"?t.getDropPayload(d):null}),p()}},{type:"dragend",listener:function(d){s.current={dropTargets:s.current.dropTargets,input:k(d)},f()}}].concat(ee(Ye({onDragEnd:f}))),{capture:!0});l.start({nativeSetDragImage:Bt(r)})}function pe(e){var r,t=e.event,n=e.current,o=(r=n[0])===null||r===void 0?void 0:r.dropEffect;o!=null&&t.dataTransfer&&(t.dataTransfer.dropEffect=o)}function Kt(e){var r=e.event,t=e.dragType,n=e.getDropTargetsOver,o=k(r);if(t.startedFrom==="external")return{input:o,dropTargets:[]};var a=n({input:o,source:t.payload,target:r.target,current:[]});return{input:o,dropTargets:a}}var me={canStart:Ze,start:Nt};var ge=new Map;function Wt(e){var r=e.typeKey,t=e.mount,n=ge.get(r);if(n)return n.usageCount++,n;var o={typeKey:r,unmount:t(),usageCount:1};return ge.set(r,o),o}function Je(e){var r=Wt(e);return function(){r.usageCount--,!(r.usageCount>0)&&(r.unmount(),ge.delete(e.typeKey))}}function Y(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(){r.forEach(function(o){return o()})}}function re(e,r){var t=r.attribute,n=r.value;return e.setAttribute(t,n),function(){return e.removeAttribute(t)}}function Qe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function M(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Qe(Object(t),!0).forEach(function(n){E(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ve(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=qt(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){l=!0,a=u},f:function(){try{s||t.return==null||t.return()}finally{if(l)throw a}}}}function qt(e,r){if(e){if(typeof e=="string")return _e(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_e(e,r):void 0}}function _e(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function ye(e){return e.slice(0).reverse()}function et(e){var r=e.typeKey,t=e.defaultDropEffect,n=new WeakMap,o="data-drop-target-for-".concat(r),a="[".concat(o,"]");function s(c){return n.set(c.element,c),function(){return n.delete(c.element)}}function l(c){if(0)var d;var m=Y(re(c.element,{attribute:o,value:"true"}),s(c));return S(m)}function i(c){var d,m,v,I,h=c.source,b=c.target,D=c.input,w=c.result,y=w===void 0?[]:w;if(b==null)return y;if(!(b instanceof Element))return b instanceof Node?i({source:h,target:b.parentElement,input:D,result:y}):y;var P=b.closest(a);if(P==null)return y;var x=n.get(P);if(x==null)return y;var O={input:D,source:h,element:x.element};if(x.canDrop&&!x.canDrop(O))return i({source:h,target:x.element.parentElement,input:D,result:y});var A=(d=(m=x.getData)===null||m===void 0?void 0:m.call(x,O))!==null&&d!==void 0?d:{},C=(v=(I=x.getDropEffect)===null||I===void 0?void 0:I.call(x,O))!==null&&v!==void 0?v:t,T={data:A,element:x.element,dropEffect:C,isActiveDueToStickiness:!1};return i({source:h,target:x.element.parentElement,input:D,result:[].concat(ee(y),[T])})}function u(c){var d=c.eventName,m=c.payload,v=ve(m.location.current.dropTargets),I;try{for(v.s();!(I=v.n()).done;){var h,b=I.value,D=n.get(b.element),w=M(M({},m),{},{self:b});D==null||(h=D[d])===null||h===void 0||h.call(D,w)}}catch(y){v.e(y)}finally{v.f()}}var f={onGenerateDragPreview:u,onDrag:u,onDragStart:u,onDrop:u,onDropTargetChange:function(d){var m=d.payload,v=new Set(m.location.current.dropTargets.map(function(K){return K.element})),I=new Set,h=ve(m.location.previous.dropTargets),b;try{for(h.s();!(b=h.n()).done;){var D,w=b.value;I.add(w.element);var y=n.get(w.element),P=v.has(w.element),x=M(M({},m),{},{self:w});if(y==null||(D=y.onDropTargetChange)===null||D===void 0||D.call(y,x),!P){var O;y==null||(O=y.onDragLeave)===null||O===void 0||O.call(y,x)}}}catch(K){h.e(K)}finally{h.f()}var A=ve(m.location.current.dropTargets),C;try{for(A.s();!(C=A.n()).done;){var T,H,se=C.value;if(!I.has(se.element)){var xe=M(M({},m),{},{self:se}),j=n.get(se.element);j==null||(T=j.onDropTargetChange)===null||T===void 0||T.call(j,xe),j==null||(H=j.onDragEnter)===null||H===void 0||H.call(j,xe)}}}catch(K){A.e(K)}finally{A.f()}}};function p(c){f[c.eventName](c)}function g(c){var d=c.source,m=c.target,v=c.input,I=c.current,h=i({source:d,target:m,input:v});if(h.length>=I.length)return h;for(var b=ye(I),D=ye(h),w=[],y=0;y<b.length;y++){var P,x=b[y],O=D[y];if(O!=null){w.push(O);continue}var A=w[y-1],C=b[y-1];if(A?.element!==C?.element)break;var T=n.get(x.element);if(!T)break;var H={input:v,source:d,element:T.element};if(T.canDrop&&!T.canDrop(H)||!((P=T.getIsSticky)!==null&&P!==void 0&&P.call(T,H)))break;w.push(M(M({},x),{},{isActiveDueToStickiness:!0}))}return ye(w)}return{dropTargetForConsumers:l,getIsOver:g,dispatchEvent:p}}function $t(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Ut(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return s=u.done,u},e:function(u){l=!0,a=u},f:function(){try{s||t.return==null||t.return()}finally{if(l)throw a}}}}function Ut(e,r){if(e){if(typeof e=="string")return tt(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?tt(e,r):void 0}}function tt(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function rt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function zt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?rt(Object(t),!0).forEach(function(n){E(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function nt(){var e=new Set,r=null;function t(a){r&&(!a.canMonitor||a.canMonitor(r.canMonitorArgs))&&r.active.add(a)}function n(a){var s=zt({},a);e.add(s),t(s);function l(){e.delete(s),r&&r.active.delete(s)}return S(l)}function o(a){var s=a.eventName,l=a.payload;if(s==="onGenerateDragPreview"){r={canMonitorArgs:{initial:l.location.initial,source:l.source},active:new Set};var i=$t(e),u;try{for(i.s();!(u=i.n()).done;){var f=u.value;t(f)}}catch(v){i.e(v)}finally{i.f()}}if(r){for(var p=Array.from(r.active),g=0,c=p;g<c.length;g++){var d=c[g];if(r.active.has(d)){var m;(m=d[s])===null||m===void 0||m.call(d,l)}}s==="onDrop"&&(r.active.clear(),r=null)}}return{dispatchEvent:o,monitorForConsumers:n}}function ot(e){var r=e.typeKey,t=e.mount,n=e.dispatchEventToSource,o=e.onPostDispatch,a=e.defaultDropEffect,s=nt(),l=et({typeKey:r,defaultDropEffect:a});function i(p){n?.(p),l.dispatchEvent(p),s.dispatchEvent(p),o?.(p)}function u(p){var g=p.event,c=p.dragType;me.start({event:g,dragType:c,getDropTargetsOver:l.getIsOver,dispatchEvent:i})}function f(){function p(){var g={canStart:me.canStart,start:u};return t(g)}return Je({typeKey:r,mount:p})}return{registerUsage:f,dropTarget:l.dropTargetForConsumers,monitor:s.monitorForConsumers}}var at=S(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),it="pdnd:android-fallback";var he="text/plain";var st="text/uri-list";var lt="application/vnd.pdnd";var ne=new WeakMap;function Yt(e){return ne.set(e.element,e),function(){ne.delete(e.element)}}var ut=Be(),be=ot({typeKey:"element",defaultDropEffect:"move",mount:function(r){return Y(ut.bindEvents(),(0,ct.bind)(document,{type:"dragstart",listener:function(n){var o,a,s,l,i,u;if(r.canStart(n)&&!n.defaultPrevented&&n.dataTransfer){var f=n.target;if(f instanceof HTMLElement){var p=ne.get(f);if(p){var g=k(n),c={element:p.element,dragHandle:(o=p.dragHandle)!==null&&o!==void 0?o:null,input:g};if(p.canDrag&&!p.canDrag(c)){n.preventDefault();return}if(p.dragHandle){var d=_({x:g.clientX,y:g.clientY});if(!p.dragHandle.contains(d)){n.preventDefault();return}}var m=(a=(s=p.getInitialDataForExternal)===null||s===void 0?void 0:s.call(p,c))!==null&&a!==void 0?a:null;if(m)for(var v=0,I=Object.entries(m);v<I.length;v++){var h=G(I[v],2),b=h[0],D=h[1];n.dataTransfer.setData(b,D??"")}at()&&!n.dataTransfer.types.includes(he)&&!n.dataTransfer.types.includes(st)&&n.dataTransfer.setData(he,it),n.dataTransfer.setData(lt,"");var w={element:p.element,dragHandle:(l=p.dragHandle)!==null&&l!==void 0?l:null,data:(i=(u=p.getInitialData)===null||u===void 0?void 0:u.call(p,c))!==null&&i!==void 0?i:{}},y={type:"element",payload:w,startedFrom:"internal"};r.start({event:n,dragType:y})}}}}}))},dispatchEventToSource:function(r){var t,n,o=r.eventName,a=r.payload;(t=ne.get(a.source.element))===null||t===void 0||(n=t[o])===null||n===void 0||n.call(t,a)},onPostDispatch:ut.getOnPostDispatch()}),oe=be.dropTarget,Ie=be.monitor;function De(e){if(0)var r;var t=Y(be.registerUsage(),Yt(e),re(e.element,{attribute:"draggable",value:"true"}));return S(t)}function Vt(e,r){var t=Object.keys(e),n=Object.keys(r);return t.length!==n.length?!1:t.every(function(o){return Object.is(e[o],r[o])})}function dt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vt,r=null;return function(t){return r&&e(r.value,t)||(r={value:t}),r.value}}function pt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function ft(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?pt(Object(t),!0).forEach(function(n){E(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var gt=Symbol("list-item-instruction"),Xt={vertical:{start:"top",end:"bottom",size:"height",point:"y"},horizontal:{start:"left",end:"right",size:"width",point:"x"}};function Gt(e){var r=e.client,t=e.borderBox,n=e.axis,o=t[n.size]/4;return r[n.point]<=t[n.start]+o?"reorder-before":r[n.point]>=t[n.end]-o?"reorder-after":"combine"}function Zt(e){var r=e.client,t=e.borderBox,n=e.axis,o=t[n.size]/2;return r[n.point]<t[n.start]+o?"reorder-before":"reorder-after"}var Jt=dt();function ae(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.every(function(n){return n==="available"||n==="blocked"})}function mt(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.every(function(n){return n==="not-available"})}function vt(e,r){var t,n,o,a=r.operations,s=r.element,l=r.input,i=r.axis,u=i===void 0?"vertical":i,f={x:l.clientX,y:l.clientY},p=s.getBoundingClientRect(),g=Xt[u],c=(t=a.combine)!==null&&t!==void 0?t:"not-available",d=(n=a["reorder-before"])!==null&&n!==void 0?n:"not-available",m=(o=a["reorder-after"])!==null&&o!==void 0?o:"not-available",v=function(){if(!ae(c))return ae(d,m)?Zt({client:f,borderBox:p,axis:g}):ae(d)?"reorder-before":ae(m)?"reorder-after":null;var b=Gt({client:f,borderBox:p,axis:g});return b==="reorder-after"?mt(m)?"combine":b:b==="reorder-before"&&mt(d)?"combine":b}();if(!v)return e;var I={operation:v,blocked:a[v]==="blocked",axis:u},h=Jt(I);return ft(ft({},e),{},E({},gt,h))}function ie(e){var r;return(r=e[gt])!==null&&r!==void 0?r:null}var R=class{constructor(r,t={}){this.onMove=r,this.options={maxDepth:t.maxDepth??6,livewireComponent:t.livewireComponent||null,autoSave:t.autoSave??!0},this.cleanupFunctions=[],this.dropIndicator=null,this.pendingMoves=[],this.hasUnsavedChanges=!1,this.isDragging=!1,this.needsReinit=!1}init(){this.createDropIndicator(),this.registerDraggables(),this.registerDropTargets(),this.registerDropAtEnd(),this.registerMonitor()}createDropIndicator(){this.dropIndicator=document.createElement("div"),this.dropIndicator.className="filament-tree-drop-indicator",this.dropIndicator.style.position="fixed",this.dropIndicator.style.pointerEvents="none",this.dropIndicator.style.zIndex="9999",this.dropIndicator.style.display="none",document.body.appendChild(this.dropIndicator)}isDescendantOf(r,t){let n=parseInt(r.dataset.itemId),o=parseInt(t.dataset.itemId),a=t.querySelector(":scope > .filament-tree-children");return a?a.querySelector(`[data-item-id="${n}"]`)!==null:!1}registerDraggables(){document.querySelectorAll("[data-tree-item]").forEach(t=>{let n=t.querySelector("[data-drag-handle]");if(!n)return;let o=De({element:t,dragHandle:n,getInitialData:()=>({type:"tree-item",id:parseInt(t.dataset.itemId),depth:parseInt(t.dataset.depth)||0,parentId:parseInt(t.dataset.parentId)||-1}),onDragStart:()=>{t.classList.add("filament-tree-dragging")},onDrop:()=>{t.classList.remove("filament-tree-dragging")}});this.cleanupFunctions.push(o)})}registerDropTargets(){document.querySelectorAll("[data-tree-item]").forEach(t=>{let n=t.querySelector(":scope > .filament-tree-node-content");if(!n)return;let o=oe({element:n,canDrop:({source:a})=>a.element!==t,getIsSticky:()=>!0,getData:({input:a,element:s,source:l})=>{let i=t,u={type:"tree-item",id:parseInt(i.dataset.itemId)},f=parseInt(i.dataset.depth)||0,p=parseInt(i.dataset.itemId),g=!1,c=!1,d=!1;if(l?.element){let m=l.element,I=parseInt(m.dataset.itemId)===p,h=this.isDescendantOf(i,m),D=f+1>=this.options.maxDepth;g=I||h||D,c=I||h,d=I||h}return vt(u,{input:a,element:n,operations:{"reorder-before":c?"blocked":"available","reorder-after":d?"blocked":"available",combine:g?"blocked":"available"},axis:"vertical"})},onDragEnter:({self:a,location:s})=>{if(s.current.dropTargets[0]?.element!==a.element)return;let i=ie(a.data);i&&this.showDropIndicator(t,i.operation,i.blocked)},onDrag:({self:a,location:s})=>{if(s.current.dropTargets[0]?.element!==a.element)return;let i=ie(a.data);i&&this.showDropIndicator(t,i.operation,i.blocked)},onDragLeave:({self:a,location:s})=>{s.current.dropTargets[0]?.element===a.element&&this.hideDropIndicator()},onDrop:({source:a,self:s,location:l})=>{if(l.current.dropTargets[0]?.element!==s.element||(this.hideDropIndicator(),!a?.data||!s?.data))return;let u=ie(s.data);if(!u||u.blocked)return;let f=a.data.id,p=s.data.id,g;if(u.operation==="combine")g={nodeId:f,newParentId:p,position:"inside",referenceId:null};else if(u.operation==="reorder-before"){let c=document.querySelector(`[data-item-id="${p}"]`),d=parseInt(c?.dataset.parentId||"-1");g={nodeId:f,newParentId:d,position:"before",referenceId:p}}else if(u.operation==="reorder-after"){let c=document.querySelector(`[data-item-id="${p}"]`),d=parseInt(c?.dataset.parentId||"-1");g={nodeId:f,newParentId:d,position:"after",referenceId:p}}this.options.autoSave?this.options.livewireComponent&&g&&(this.applyMoveToDOM(a.element,t,u.operation,g),this.needsReinit=!0,this.options.livewireComponent.call("reorderTree",[g])):(this.pendingMoves.push(g),this.hasUnsavedChanges=!0,this.updateButtonStates(),this.applyMoveToDOM(a.element,t,u.operation,g),this.needsReinit=!0)}});this.cleanupFunctions.push(o)})}registerDropAtEnd(){let r=document.querySelector("[data-drop-at-end]");if(!r)return;let t=oe({element:r,getIsSticky:()=>!0,getData:()=>({type:"drop-at-end",depth:0}),onDragEnter:()=>{let n=r.getBoundingClientRect(),o=getComputedStyle(document.documentElement).getPropertyValue("--primary-600").trim();this.dropIndicator.style.display="block",this.dropIndicator.style.left=`${n.left}px`,this.dropIndicator.style.width=`${n.width}px`,this.dropIndicator.style.top=`${n.top}px`,this.dropIndicator.style.height="3px",this.dropIndicator.style.backgroundColor=o,this.dropIndicator.style.borderRadius="3px",this.dropIndicator.style.boxShadow=`0 0 8px ${o}`},onDrop:({source:n})=>{if(this.hideDropIndicator(),!n?.data)return;let o=document.querySelectorAll(".filament-tree-container > [data-tree-item]"),a=o[o.length-1],s=parseInt(a?.dataset.itemId||"-1"),l={nodeId:n.data.id,newParentId:-1,position:"after",referenceId:s};this.options.autoSave?this.options.livewireComponent&&(a&&this.applyMoveToDOM(n.element,a,"reorder-after",l),this.needsReinit=!0,this.options.livewireComponent.call("reorderTree",[l])):(this.pendingMoves.push(l),this.hasUnsavedChanges=!0,this.updateButtonStates(),a&&this.applyMoveToDOM(n.element,a,"reorder-after",l),this.needsReinit=!0)}});this.cleanupFunctions.push(t)}showDropIndicator(r,t,n=!1){if(!this.dropIndicator)return;let o=r.querySelector(":scope > .filament-tree-node-content");if(!o)return;let a=o.getBoundingClientRect(),s=getComputedStyle(document.documentElement),l=s.getPropertyValue("--primary-600").trim(),i=s.getPropertyValue("--danger-600").trim(),u=n?i:l;this.dropIndicator.style.display="block",t==="combine"?(this.dropIndicator.style.left=`${a.left+4}px`,this.dropIndicator.style.width=`${a.width-4*2}px`,this.dropIndicator.style.top=`${a.top+4}px`,this.dropIndicator.style.height=`${a.height-4*2}px`,this.dropIndicator.style.backgroundColor="transparent",this.dropIndicator.style.border=`3px dashed ${u}`,this.dropIndicator.style.borderRadius="8px"):t==="reorder-before"?(this.dropIndicator.style.left=`${a.left}px`,this.dropIndicator.style.width=`${a.width}px`,this.dropIndicator.style.top=`${a.top-6}px`,this.dropIndicator.style.height="3px",this.dropIndicator.style.backgroundColor=u,this.dropIndicator.style.border="none",this.dropIndicator.style.borderRadius="3px"):t==="reorder-after"&&(this.dropIndicator.style.left=`${a.left}px`,this.dropIndicator.style.width=`${a.width}px`,this.dropIndicator.style.top=`${a.bottom+3}px`,this.dropIndicator.style.height="3px",this.dropIndicator.style.backgroundColor=u,this.dropIndicator.style.border="none",this.dropIndicator.style.borderRadius="3px")}hideDropIndicator(){this.dropIndicator&&(this.dropIndicator.style.display="none")}registerMonitor(){let r=Ie({onDragStart:()=>{this.isDragging=!0},onDrop:()=>{this.isDragging=!1,this.hideDropIndicator(),this.needsReinit&&setTimeout(()=>{!this.isDragging&&this.needsReinit&&(this.reinit(),this.needsReinit=!1)},50)}});this.cleanupFunctions.push(r)}applyMoveToDOM(r,t,n,o){if(!(!r||!t)){if(n==="combine"){let a=t.querySelector(":scope > .filament-tree-children");a||(a=document.createElement("div"),a.className="filament-tree-children",a.style.marginLeft="2rem",a.style.display="block",t.appendChild(a)),a.appendChild(r);let s=parseInt(t.dataset.depth)||0;this.updateItemDepth(r,s+1),r.dataset.parentId=o.newParentId}else if(n==="reorder-before"){t.parentElement.insertBefore(r,t);let a=parseInt(t.dataset.depth)||0;this.updateItemDepth(r,a),r.dataset.parentId=t.dataset.parentId||"-1"}else if(n==="reorder-after"){t.nextSibling?t.parentElement.insertBefore(r,t.nextSibling):t.parentElement.appendChild(r);let a=parseInt(t.dataset.depth)||0;this.updateItemDepth(r,a),r.dataset.parentId=t.dataset.parentId||"-1"}this.cleanupEmptyContainers()}}updateItemDepth(r,t){r.dataset.depth=t;let n=r.querySelector(":scope > .filament-tree-children");n&&n.querySelectorAll(":scope > [data-tree-item]").forEach(a=>{this.updateItemDepth(a,t+1)})}cleanupEmptyContainers(){document.querySelectorAll(".filament-tree-children").forEach(t=>{t.querySelector("[data-tree-item]")!==null||t.remove()})}reinit(){this.cleanupFunctions.forEach(r=>r()),this.cleanupFunctions=[],this.registerDraggables(),this.registerDropTargets(),this.registerDropAtEnd(),this.registerMonitor()}saveChanges(){this.options.autoSave||this.pendingMoves.length===0||this.options.livewireComponent&&(this.options.livewireComponent.call("reorderTree",this.pendingMoves),this.pendingMoves=[],this.hasUnsavedChanges=!1,this.updateButtonStates())}cancelChanges(){this.options.autoSave||(this.pendingMoves=[],this.hasUnsavedChanges=!1,this.updateButtonStates(),this.options.livewireComponent&&this.options.livewireComponent.$refresh())}updateButtonStates(){if(this.options.autoSave)return;let r=document.getElementById("tree-save-btn"),t=document.getElementById("tree-cancel-btn"),n=document.getElementById("tree-changes-indicator");r&&t&&n&&(this.hasUnsavedChanges?(r.removeAttribute("disabled"),r.removeAttribute("aria-disabled"),r.classList.remove("fi-disabled"),t.removeAttribute("disabled"),t.removeAttribute("aria-disabled"),t.classList.remove("fi-disabled"),n.classList.remove("hidden"),n.classList.add("flex")):(r.setAttribute("disabled",""),r.setAttribute("aria-disabled","true"),r.classList.add("fi-disabled"),t.setAttribute("disabled",""),t.setAttribute("aria-disabled","true"),t.classList.add("fi-disabled"),n.classList.add("hidden"),n.classList.remove("flex")))}destroy(){this.cleanupFunctions.forEach(r=>r()),this.cleanupFunctions=[],this.dropIndicator&&(this.dropIndicator.remove(),this.dropIndicator=null)}};window.FilamentTree=R;window.FilamentTree=R;var io=R;export{io as default};
